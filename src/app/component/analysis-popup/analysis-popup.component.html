<div id="analysisPopup" class="ontop">
  <div class="popupAnalysis">
    <div>
      <div class="buttonContainer">
        <button class="closeAnalysis" (click)="closeAnalysis()"
                (mouseover)="mouseOver(99999)"
                (mouseout)="mouseOut(99999)"></button>
        <button id="exportButton" (click)="setTab(0)"
                (mouseover)="mouseOver(0)"
                (mouseout)="mouseOut(0)"
                style="color: black; background-color: gray"> Export </button>
        <button id="showPlotsButton" (click)="setTab(1)"
                (mouseover)="mouseOver(1)"
                (mouseout)="mouseOut(1)"> Plots Charts</button>
        <button id="showEqsButton" (click)="setTab(2)"
                (mouseover)="mouseOver(2)"
                (mouseout)="mouseOut(2)"> Show Eqns </button>
      </div>
    </div>
    <div class="tabPanel" *ngIf="selectedTab === 0">
      <div *ngIf="selectedAnalysis === 'loop'">
        <div>
          <input type="checkbox" value="requiredLoopCheck" (change)="setOption($event)" [checked]="requiredLoopCheck">
          <label>
            Required Loops
          </label>
        </div>
        <div>
          <input type="checkbox" value="allLoopCheck" (change)="setOption($event)" [checked]="allLoopCheck">
          <label>
            All Loops
          </label>
        </div>
        <div>
          <button class="secondaryButtons" (click)="exportExcel('loops')">Export
            Data on the Selected Analysis
          </button>
        </div>
      </div>
      <div *ngIf="selectedAnalysis === 'force'">
        <div>
          <input type="checkbox" value="staticForcesCheck" (change)="setOption($event)" [checked]="staticForcesCheck">
          <label>
            Forces
          </label>
        </div>
        <div>
          <input type="checkbox" value="staticTorqueCheck" (change)="setOption($event)" [checked]="staticTorqueCheck">
          <label>
            Torque
          </label>
        </div>
        <div>
          <input type="checkbox" value="staticForcePositionsCheck" (change)="setOption($event)" [checked]="staticForcePositionsCheck">
          <label>
            Force Positions
          </label>
        </div>
        <div>
          <input type="checkbox" value="staticJointPositionsCheck" (change)="setOption($event)" [checked]="staticJointPositionsCheck">
          <label>
            Joint Positions
          </label>
        </div>
        <div>
          <button class="secondaryButtons" (click)="exportExcel('statics')">Export
            Data on the Selected Analysis
          </button>
        </div>
      </div>
      <div *ngIf="selectedAnalysis === 'stress'">
        <!-- TODO: Do this once this is determined -->
      </div>
      <div *ngIf="selectedAnalysis === 'kinematic'">
        <div>
          <input type="checkbox" value="linKinJointCheck" (change)="setOption($event)" [checked]="linKinJointCheck">
          <label>
            Linear Kinematics at Joint
          </label>
        </div>
        <div *ngIf="this.linKinJointCheck">
          <input type="checkbox" value="linKinJointPos" (change)="setOption($event)" [checked]="linKinJointPos">
          <label>Position</label>
        </div>
        <div *ngIf="this.linKinJointCheck">
          <input type="checkbox" value="linKinJointVel" (change)="setOption($event)" [checked]="linKinJointVel">
          <label>Velocity</label>
        </div>
        <div *ngIf="this.linKinJointCheck">
          <input type="checkbox" value="linKinJointAcc" (change)="setOption($event)" [checked]="linKinJointAcc">
          <label>Acceleration</label>
        </div>
        <div>
          <input type="checkbox" value="linKinLinkCheck" (change)="setOption($event)" [checked]="linKinLinkCheck">
          <label>
            Linear Kinematics at Link (Center of Mass)
          </label>
        </div>
        <div *ngIf="this.linKinLinkCheck">
          <input type="checkbox" value="linKinLinkPos" (change)="setOption($event)" [checked]="linKinLinkPos">
          <label>Position</label>
        </div>
        <div *ngIf="this.linKinLinkCheck">
          <input type="checkbox" value="linKinLinkVel" (change)="setOption($event)" [checked]="linKinLinkVel">
          <label>Velocity</label>
        </div>
        <div *ngIf="this.linKinLinkCheck">
          <input type="checkbox" value="linKinLinkAcc" (change)="setOption($event)" [checked]="linKinLinkAcc">
          <label>Acceleration</label>
        </div>
        <div>
          <input type="checkbox" value="angKinLinkCheck" (change)="setOption($event)" [checked]="angKinLinkCheck">
          <label>
            Angular Kinematics at Link
          </label>
        </div>
        <div *ngIf="this.angKinLinkCheck">
          <input type="checkbox" value="angKinLinkPos" (change)="setOption($event)" [checked]="angKinLinkPos">
          <label>Position</label>
        </div>
        <div *ngIf="this.angKinLinkCheck">
          <input type="checkbox" value="angKinLinkVel" (change)="setOption($event)" [checked]="angKinLinkVel">
          <label>Velocity</label>
        </div>
        <div *ngIf="this.angKinLinkCheck">
          <input type="checkbox" value="angKinLinkAcc" (change)="setOption($event)" [checked]="angKinLinkAcc">
          <label>Acceleration</label>
        </div>
        <div>
          <button class="secondaryButtons" (click)="exportExcel('kinematics')">Export
            Data on the Selected Analysis
          </button>
        </div>
      </div>
      <div *ngIf="selectedAnalysis === 'ic'">
        <div>
          <input type="checkbox">
          <label>
            Position of ICs
          </label>
        </div>
        <div>
          <input type="checkbox" value="linKinJointICCheck" (change)="setOption($event)" [checked]="linKinJointICCheck">
          <label>
            Linear Kinematics at Joint
          </label>
        </div>
        <div *ngIf="this.linKinJointICCheck">
          <input type="checkbox" value="linKinJointICPos" (change)="setOption($event)" [checked]="linKinJointICPos">
          <label>Position</label>
        </div>
        <div *ngIf="this.linKinJointICCheck">
          <input type="checkbox" value="linKinJointICVel" (change)="setOption($event)" [checked]="linKinJointICVel">
          <label>Velocity</label>
        </div>
        <div>
          <input type="checkbox" value="angKinLinkICCheck" (change)="setOption($event)" [checked]=angKinLinkICCheck>
          <label>
            Angular Kinematics at Link
          </label>
        </div>
        <div *ngIf="this.angKinLinkICCheck">
          <input type="checkbox" value="angKinLinkICVel" (change)="setOption($event)" [checked]="angKinLinkICVel">
          <label>Velocity</label>
        </div>
        <div>
          <button class="secondaryButtons" (click)="exportExcel('ics')">Export
            Data on the Selected Analysis
          </button>
        </div>
      </div>
    </div>
    <div class="tabPanel" *ngIf="selectedTab === 1">
      <table id="plotTable">
        <thead>
        <tr>
          <th></th>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td>
          </td>
        </tr>
        </tbody>
        <tfoot></tfoot>
      </table>
    </div>
    <div class="tabPanel" *ngIf="selectedTab === 2">
      <div *ngIf="selectedAnalysis === 'loop'">

      </div>
      <div *ngIf="selectedAnalysis === 'force'">
        <div *ngFor="let link of links">
          <input type="checkbox">
          <label>Link {{link.id}}</label>
          <svg [attr.height]="getLinkProp(link, 'height')" [attr.width]="getLinkProp(link, 'width')"
               style="transform: scaleY(-1);display: block; margin: auto">
            <!-- TODO: Make sure scale works accordingly -->
            <g [attr.transform]="getLinkProp(link, 'transform')"
               [attr.height]="getLinkProp(link, 'height')" [attr.width]="getLinkProp(link, 'width')" style="display: block; margin: auto">
              <path
                [attr.d]="getLinkProp(link, 'd')" [attr.id]="link.id"
                [attr.fill]="getLinkProp(link, 'fill')" style="opacity: 0.8">
              </path>
              <!-- TODO: Determine logic when the link shape is too big to showcase -->
              <circle *ngFor="let joint of link.joints" [attr.r]="getJointProp(joint, 'r')"
                      [attr.cx]="joint.x" [attr.cy]="joint.y" fill="black"/>
              <circle *ngFor="let joint of link.joints" [attr.r]="getJointProp(joint, 'ring')"
                      [attr.cx]="joint.x" [attr.cy]="joint.y" fill="gray"/>
              <svg *ngFor="let joint of link.joints" [attr.x]="joint.x - 0.3" [attr.y]="joint.y + 0.3" style="font-size: 1px;
               text-anchor: middle; overflow: visible;">
                <text style="font-size: 0.7px; text-anchor: middle; transform: scaleY(-1)"> {{joint.id}}</text>
              </svg>
            </g>
          </svg>
        </div>
      </div>
      <div *ngIf="selectedAnalysis === 'stress'">

      </div>
      <div *ngIf="selectedAnalysis === 'kinematic'">

      </div>
      <div *ngIf="selectedAnalysis === 'ic'">

      </div>
    </div>
  </div>
</div>
