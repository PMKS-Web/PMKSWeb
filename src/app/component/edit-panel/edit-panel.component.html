<div id='editWrapper'>
  <panel-section-collapsible [warning]='true' [expanded]='false' id='placeholderContainer'
                             *ngIf='hideEditPanel() && this.activeSrv.objType !== "Grid"'>
    <title-block alwaysShown icon='expand_more'>Interactive Help</title-block>
    <subtitle-block alwaysShown>Stop animation or reset the time slider to 0 to edit.</subtitle-block>
    <img src='assets/gifs/Stop.gif' />
  </panel-section-collapsible>

  <panel-section-collapsible
    [warning]='true'
    [expanded]='false'
    id='placeholderContainer'
    *ngIf="(this.activeSrv.objType == 'Grid' ||  this.activeSrv.objType == 'Nothing') && mechanismService.joints.length == 0 && !hideEditPanel()"
  >
    <title-block alwaysShown icon='expand_more'>Interactive Help</title-block>
    <subtitle-block alwaysShown>Right click on the grid to create a link.</subtitle-block>
    <img src='assets/gifs/Create.gif' />
  </panel-section-collapsible>

  <panel-section-collapsible
    [warning]='true'
    [expanded]='false'
    id='placeholderContainer'
    *ngIf="this.activeSrv.objType == 'Grid' && mechanismService.joints.length != 0 && !hideEditPanel()"
  >
    <title-block alwaysShown icon='expand_more'>Interactive Help</title-block>
    <subtitle-block alwaysShown>Select a joint or link to edit properties.</subtitle-block>
    <img src='assets/gifs/Click.gif' />
  </panel-section-collapsible>

  <panel-section
    *ngIf="this.activeSrv.objType == 'Joint' && !hideEditPanel()">
    <title-block icon='edit'>
      Edit {{ this.activeSrv.objType }} {{ this.activeSrv.selectedJoint.id | uppercase }}
    </title-block>

    <dual-input-block
      [formGroup]='this.jointForm'
      formControl1='xPos'
      formControl2='yPos'
      tooltip="The location of the joint in {{this.settingsService.length.value == 0 ? 'inches' :this.settingsService.length.value == 1 ? 'centimeters' : 'meters'}}."
    >Joint Position
    </dual-input-block>

    <input-block *ngIf='this.gridUtils.isAttachedToSlider(this.activeSrv.selectedJoint)'
                 [formGroup]='this.jointForm'
                 _formControl='angle'
                 tooltip="The angle of the slider in {{this.settingsService.angle.value == 10 ? 'degrees':'radians'}}."
    >Slider Angle
    </input-block>

    <toggle-block *ngIf='!this.gridUtils.isAttachedToSlider(this.activeSrv.selectedJoint)'
                  [formGroup]='jointForm'
                  _formControl='ground'
                  tooltip='Ground this joint, making it non-moving.'
    >Ground
    </toggle-block>

    <toggle-block
      *ngIf='this.activeSrv.selectedJoint.ground && !this.gridUtils.isAttachedToSlider(this.activeSrv.selectedJoint) '
      [formGroup]='jointForm'
      _formControl='input'
      tooltip='Make this joint the driven. Only one joint can be a input at a time.'
    >Input
    </toggle-block>

    <toggle-block *ngIf='!this.activeSrv.selectedJoint.input'
                  [formGroup]='jointForm'
                  _formControl='slider'
                  tooltip='Make this joint a prismatic joint. Only one joint can be a slider at a time.'
    >Slider
    </toggle-block>

    <!-- <toggle-block tooltip="Trace the path of this joint on the grid">Show Path</toggle-block> -->
    <button-block icon='delete' [click]='deleteJoint'>Delete Joint</button-block>
    <!-- <p>Value: {{ jointForm.value | json }}</p>
    <p>Valid: {{ jointForm.valid }}</p>
    Test: {{ this.activeSrv.Joint.x }}; -->
  </panel-section>

  <panel-section
    *ngIf="this.activeSrv.objType == 'Link' && !hideEditPanel()">
    <title-block
      icon='edit'
      description='Changing the length or angle will change the non-grounded joint.'
    >Edit {{ this.activeSrv.objType }} {{ this.activeSrv.selectedLink.id | uppercase }}</title-block
    >
    <input-block
      [formGroup]='linkForm'
      _formControl='length'
      unit='cm'
      tooltip="The length of the link in {{this.settingsService.length.value == 0 ? 'inches' :this.settingsService.length.value == 1 ? 'centimeters' : 'meters'}}."
    >Link Length
    </input-block
    >

    <input-block
      [formGroup]='linkForm'
      _formControl='angle'
      unit='deg'
      tooltip='The angle of the link relative to horizontal x-axis. A counter-clockwise rotation is positive (Right hand rule).'
    >Link Angle
    </input-block
    >
    <button-block icon='delete' [click]='deleteLink'>Delete Link</button-block>
  </panel-section>

  <panel-section-collapsible
    *ngIf="this.activeSrv.objType == 'Link' && !hideEditPanel()"
    [expanded]='false'
  >
    <title-block alwaysShown icon='expand_more'>Related Objects</title-block>
    <!-- <ng-container *ngFor="let joint of this.activeSrv.Link.joints">
      <subtitle-block icon="open_in_new" style="margin-bottom: -10px"
        >Joint {{ joint.id | uppercase }}</subtitle-block
      >
      <dual-input-block
        formControl1="xPos"
        formControl2="yPos"
        unit="cm"
        tooltip="The location of the joint in cm."
        >Joint {{ joint.id | uppercase }} Position
      </dual-input-block>
    </ng-container> -->
  </panel-section-collapsible>

  <!-- <panel-section-collapsible>
    <title-block alwaysShown icon="expand_less">Debug Menu</title-block>
    <button (click)="debug()">Debug</button> -->
  <!-- <input-block unit="cm" [value]="0.2" tooltip="Tooltip Info">Input Label</input-block>
    <button-block icon="edit">Button Label</button-block>
    <radio-block tooltip="Tooltip Info" option1="cm" option2="meter" option3="inches"
      >Radio Block</radio-block
    >
    <toggle-block tooltip="Tooltip Info">Toggle Block</toggle-block>
    <subtitle-block icon="home">Subtitle Block</subtitle-block>
    <dual-input-block unit="cm" tooltip="Tooltip Info" [value1]="0.2" [value2]="1.2">Dual Input Block</dual-input-block> -->
  <!-- </panel-section-collapsible> -->

  <!-- <panel-section>
    <title-block icon="edit">Normal Section</title-block>
    <input-block unit="cm" [value]="0.2" tooltip="Tooltip Info">Input Label</input-block>
    <button-block icon="edit">Button Label</button-block>
    <radio-block tooltip="Tooltip Info" option1="this" option2="that">Radio Block</radio-block>
    <toggle-block tooltip="Tooltip Info">Toggle Block</toggle-block>
    <subtitle-block icon="home" buttonLabel="back">Subtitle Block</subtitle-block>
    <dual-input-block unit="cm" tooltip="Tooltip Info" [value1]="0.2" [value2]="1.2">Dual Input Block</dual-input-block>
  </panel-section> -->
</div>
